---
// Hero.astro
---

<section id="hero" class="relative w-full h-screen overflow-hidden">
	<div id="video-background" class="absolute inset-0 w-full h-full">
		<div
			id="image-placeholder"
			class="absolute inset-0 bg-cover bg-center bg-no-repeat z-10 transition-opacity duration-1000"
		>
		</div>
		<div
			id="video-container"
			class="w-full h-full opacity-0 transition-opacity duration-1000 z-20"
		>
			<video
				id="background-video"
				class="w-full h-full object-cover"
				src="/assets/hero-background.mp4"
				autoplay
				loop
				muted
				playsinline></video>
		</div>
		<div
			class="absolute inset-0 flex flex-col justify-between items-center p-4 text-white z-30 bg-black bg-opacity-30"
		>
			<div
				class="flex-grow flex flex-col justify-center items-center text-center w-[30%] max-w-4xl mx-auto"
			>
				<div
					class="mb-4 flex items-center bg-black bg-opacity-50 p-2 rounded"
				>
					<img
						src="/images/map.svg"
						alt="Icono de mapa"
						class="w-6 h-6 mr-2"
						width="24"
						height="24"
						loading="lazy"
					/>
					<span class="text-lg md:text-xl font-semibold"
						>Avenida Petapa Zona 12</span
					>
				</div>
				<h1 class="text-4xl font-bold mb-6 font-play leading-tight">
					ESTRENA LA YAMAHA DE TUS SUEÑOS
				</h1>
				<p class="text-xl md:text-2xl">
					Gran inauguración 12 de Agosto de 2024
				</p>
			</div>
			<img
				src="/images/arrow_down.png"
				alt="Flecha hacia abajo"
				class="w-8 h-8 md:w-12 md:h-12"
				width="48"
				height="48"
				loading="lazy"
			/>
		</div>
	</div>
</section>

<style>
	#hero {
		position: relative;
		width: 100%;
		height: 100vh;
		overflow: hidden;
	}
	#video-container {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
	}
	#image-placeholder {
		background-image: url("/assets/images/hero-background.webp");
		background-size: cover;
		background-position: center;
		background-repeat: no-repeat;
		transform: scale(1.05);
		animation: zoomEffect 8s infinite alternate;
	}
	#background-video {
		object-fit: cover;
		width: 100%;
		height: 100%;
	}
	@keyframes zoomEffect {
		0% {
			transform: scale(1.05);
		}
		100% {
			transform: scale(1.15);
		}
	}
	.font-play {
		font-family: "Play", sans-serif;
	}
</style>

<script>
	document.addEventListener("DOMContentLoaded", function () {
		const videoContainer = document.getElementById("video-container");
		const imagePlaceholder = document.getElementById("image-placeholder");
		const video = document.getElementById("background-video");
		const img = new Image();
		img.src = "/assets/images/hero-background.webp";

		img.onload = () => {
			imagePlaceholder.style.opacity = "1";
		};

		function loadVideo() {
			if (video) {
				video
					.play()
					.then(() => {
						setTimeout(() => {
							videoContainer.style.opacity = "1";
							imagePlaceholder.style.opacity = "0";
						}, 1500);
					})
					.catch((error) => {
						console.error("Error al reproducir el video:", error);
					});
			}
		}

		if (img.complete) {
			loadVideo();
		} else {
			img.onload = loadVideo;
			setTimeout(loadVideo, 3000); // Fallback si la imagen tarda demasiado
		}
	});
</script>

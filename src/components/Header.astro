---
// Header.astro
import { Image } from "astro:assets";

const navItems = [
    { href: "/", text: "INICIO" },
    { href: "/productos", text: "PRODUCTOS" },
    { href: "/servicios", text: "SERVICIOS" },
    { href: "/contacto", text: "CONTACTO" },
];
---

<header
    id="main-header"
    class="fixed w-full transition-all duration-300 z-50 bg-transparent text-white"
>
    <nav
        class="container mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center"
    >
        <a href="/" class="flex items-center">
            <Image
                id="logo"
                src="/assets/images/yamaha-logo.svg"
                alt="Yamaha Logo"
                width={120}
                height={40}
                class="h-14 sm:h-20 w-auto transition-all duration-300"
            />
        </a>
        <div class="hidden lg:flex space-x-1 xl:space-x-4">
            {
                navItems.map(({ href, text }) => (
                    <a
                        href={href}
                        class="px-3 py-2 text-sm lg:text-base font-medium hover:text-gray-300 transition-colors"
                    >
                        {text}
                    </a>
                ))
            }
        </div>
        <button
            id="mobile-menu-button"
            class="lg:hidden p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"
            aria-label="Abrir menú móvil"
        >
            <span class="sr-only">Menú</span>
            <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                class="w-6 h-6"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M4 6h16M4 12h16m-7 6h7"></path>
            </svg>
        </button>
    </nav>
    <div
        id="mobile-menu"
        class="hidden lg:hidden bg-white text-gray-800 shadow-md"
    >
        {
            navItems.map(({ href, text }) => (
                <a
                    href={href}
                    class="block px-4 py-3 text-base font-medium hover:bg-gray-100 transition-colors"
                >
                    {text}
                </a>
            ))
        }
    </div>
</header>

<script>
    const header = document.getElementById("main-header");
    const logo = document.getElementById("logo");
    const mobileMenu = document.getElementById("mobile-menu");
    const mobileMenuButton = document.getElementById("mobile-menu-button");

    function updateHeaderOnScroll() {
        if (window.scrollY > 50) {
            header.classList.add("pt-4");
            header.classList.add("bg-white", "shadow-md", "text-gray-800");
            header.classList.remove("bg-transparent", "text-white");
            logo.classList.remove("mt-4");
            logo.classList.remove("h-14");
            logo.classList.add("h-8");
            logo.classList.add("sm:h-10");
            logo.classList.remove("sm:h-20");
        } else {
            header.classList.remove("pt-4");
            header.classList.remove("bg-white", "shadow-md", "text-gray-800");
            header.classList.add("bg-transparent", "text-white");
            logo.classList.remove("h-8");
            logo.classList.add("h-14");
            logo.classList.add("mt-4");
            logo.classList.remove("sm:h-10");
            logo.classList.add("sm:h-20");
        }
    }

    function toggleMobileMenu() {
        mobileMenu.classList.toggle("hidden");
    }

    window.addEventListener("scroll", updateHeaderOnScroll, { passive: true });
    mobileMenuButton.addEventListener("click", toggleMobileMenu);

    updateHeaderOnScroll();
</script>

<style>
    @media (max-width: 1023px) {
        #mobile-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            z-index: 40;
        }
    }
</style>
